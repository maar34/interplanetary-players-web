class BodyRenderer{constructor(bodySize){this.setBodySize(bodySize),this.starPos=[],this.amp_history=[],this.lastPositions=[{x:0,z:0},{x:0,z:0},{x:0,z:0},{x:0,z:0}],this.initStarPositions(),this.t=1,this.t2=45,this.planetRotation=0}setBodySize(bodySize){this.bodySize=bodySize,this.ringDiameter=70*this.bodySize,this.ringWidth=3*this.bodySize,this.moonSize=.07*this.bodySize,this.planetSize=.66*this.bodySize}initStarPositions(){for(let i=0;i<150;i++){let theta=random(180),phi=random(360),pos=createVector(2e3*sin(theta)*cos(phi),2e3*cos(theta),2e3*sin(theta)*sin(phi)),brightness=random(50,100),size=random(1,3);this.starPos.push([pos,brightness,size])}}renderBody(){this.amp_history.push(amplitud),push(),specularMaterial(60,100,50),shininess(50),texture(body00),ambientLight(50),ambientLight(30,30,30),pointLight(255,255,255,200,200,200),directionalLight(255,255,0,-1,0,0),spotLight(255,255,255,-200,-200,400,0,0,-1,16,50),push(),scale(this.planetSize),rotateX(90),1===playStateI&&(this.planetRotation-=.02),rotateZ(this.planetRotation),noStroke(),model(model00),pop(),push(),strokeWeight(1.5),noFill();const angleIncrement=360/this.amp_history.length,diameter=this.ringDiameter;beginShape(),rotateX(-14);for(let i=0;i<this.amp_history.length;i++){let angle=i*angleIncrement,cosAngle=cos(angle),sinAngle=sin(angle),r2=diameter+map(this.amp_history[i],-.4,.4,diameter,1),x2=r2*cosAngle,y2=r2*sinAngle,hue2=map(this.amp_history[i],-1,1,150,0);stroke(hue2,80,80),vertex(x2,0,y2)}endShape(CLOSE),this.amp_history.length>360&&this.amp_history.shift(),pop(),pop()}renderMoons(){this.t=millis(),playStateI&&(this.t2=45+this.t/15e4*360/TWO_PI),this.lastPositions[0].x=260*this.bodySize*cos(this.t2),this.lastPositions[0].z=260*this.bodySize*sin(this.t2),this.lastPositions[1].x=260*this.bodySize*cos(this.t2+180),this.lastPositions[1].z=260*this.bodySize*sin(this.t2+180),this.lastPositions[2].x=260*this.bodySize*cos(this.t2+90),this.lastPositions[2].z=260*this.bodySize*sin(this.t2+90),this.lastPositions[3].x=260*this.bodySize*cos(this.t2+270),this.lastPositions[3].z=260*this.bodySize*sin(this.t2+270),rotateX(-14),push(),translate(this.lastPositions[0].x,0,this.lastPositions[0].z),scale(this.moonSize),texture(body01),model(model01),pop(),push(),translate(this.lastPositions[1].x,0,this.lastPositions[1].z),scale(this.moonSize),texture(body01),model(model01),pop(),push(),translate(this.lastPositions[2].x,0,this.lastPositions[2].z),scale(this.moonSize),texture(body01),model(model01),pop(),push(),translate(this.lastPositions[3].x,0,this.lastPositions[3].z),scale(this.moonSize),texture(body01),model(model01),pop()}stars(){push(),noStroke();for(let i=0;i<this.starPos.length;i++){let pos=this.starPos[i][0],brightness=this.starPos[i][1],size=this.starPos[i][2],twinkle=brightness+sin(.001*millis()+i);push(),translate(pos.x,pos.y,pos.z),strokeWeight(size),stroke(twinkle),point(0,0,0),pop()}pop()}}